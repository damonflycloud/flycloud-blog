<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
    
  
  <link href="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






  

<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/css/flyCloud.css?v=5.1.0"/


  <meta name="keywords" content="java," />








  <link rel="shortcut icon" type="image/x-icon" href="/images/blog/flycloud.ico?v=5.1.0" />






<meta name="description" content="什么是ClassLoader Java 代码要想运行，首先需要将源代码进行编译生成 .class 文件，然后 JVM 加载 .class 字节码文件到内存，而 .class 文件是怎样被加载到 JVM 中的就是Java ClassLoader 要做的事情。  .class 文件何时被类加载器加载到 JVM 中？  new 操作时候；  当我们使用 Class.forName(“包路径+类名”)、C">
<meta name="keywords" content="java">
<meta property="og:type" content="article">
<meta property="og:title" content="ClassLoader">
<meta property="og:url" content="flycloud.me/2017/03/20/java/jvm/ClassLoader/index.html">
<meta property="og:site_name" content="FlyCloud Blog">
<meta property="og:description" content="什么是ClassLoader Java 代码要想运行，首先需要将源代码进行编译生成 .class 文件，然后 JVM 加载 .class 字节码文件到内存，而 .class 文件是怎样被加载到 JVM 中的就是Java ClassLoader 要做的事情。  .class 文件何时被类加载器加载到 JVM 中？  new 操作时候；  当我们使用 Class.forName(“包路径+类名”)、C">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/8747d788gy1foxqct6w91j21ub0g21kx.jpg">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/5879294-4d2114d3cb34e0b8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/5879294-5bc66b9ae0be8415.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2018-10-26T07:28:32.533Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ClassLoader">
<meta name="twitter:description" content="什么是ClassLoader Java 代码要想运行，首先需要将源代码进行编译生成 .class 文件，然后 JVM 加载 .class 字节码文件到内存，而 .class 文件是怎样被加载到 JVM 中的就是Java ClassLoader 要做的事情。  .class 文件何时被类加载器加载到 JVM 中？  new 操作时候；  当我们使用 Class.forName(“包路径+类名”)、C">
<meta name="twitter:image" content="https://ws1.sinaimg.cn/large/8747d788gy1foxqct6w91j21ub0g21kx.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":0,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="flycloud.me/2017/03/20/java/jvm/ClassLoader/"/>





  <title> ClassLoader | FlyCloud Blog </title>
</head>


<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?060f8b2450825fadd6aff6e494ce6218";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="flycloud.me/2017/03/20/java/jvm/ClassLoader/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="flycloud">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://flycloud.me/images/blog/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FlyCloud Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                ClassLoader
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-20T15:19:11+08:00">
                2017-03-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
            <span class="page-pv">热度
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>℃
            </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="什么是ClassLoader"><a href="#什么是ClassLoader" class="headerlink" title="什么是ClassLoader"></a>什么是ClassLoader</h2><blockquote>
<p>Java 代码要想运行，首先需要将源代码进行编译生成 .class 文件，然后 JVM 加载 .class 字节码文件到内存，而 .class 文件是怎样被加载到 JVM 中的就是Java ClassLoader 要做的事情。</p>
</blockquote>
<h3 id="class-文件何时被类加载器加载到-JVM-中？"><a href="#class-文件何时被类加载器加载到-JVM-中？" class="headerlink" title=".class 文件何时被类加载器加载到 JVM 中？"></a>.class 文件何时被类加载器加载到 JVM 中？</h3><blockquote>
<ol>
<li><p>new 操作时候；</p>
</li>
<li><p>当我们使用 Class.forName(“包路径+类名”)、Class.forName(“包路径+类名”,ClassLoader)</p>
</li>
<li><p>ClassLoader.loadClass(“包路径+类名”)的时候就触发了类加载器去类加载对应的路径去查找 *.class，并创建 Class 对象。</p>
<p>▲注意：另外需要注意的是除去 new 操作外，其他几种方式加载字节码到内存后只是生产一个 Class 对象，要产生具体的对象实例还需要使用 Class 对象 .newInstance() 函数来创建。</p>
</li>
</ol>
</blockquote>
<h2 id="Java-原生的三种-ClassLoader"><a href="#Java-原生的三种-ClassLoader" class="headerlink" title="Java 原生的三种 ClassLoader"></a>Java 原生的三种 ClassLoader</h2><h3 id="AppClassloader（应用类加载器-系统类加载器）"><a href="#AppClassloader（应用类加载器-系统类加载器）" class="headerlink" title="AppClassloader（应用类加载器/系统类加载器）"></a>AppClassloader（应用类加载器/系统类加载器）</h3><blockquote>
<p>它负责在 JVM 启动时，加载来自在命令java中的-classpath或者java.class.path系统属性或者 CLASSPATH 操作系统属性所指定的 JAR 类包和类路径</p>
</blockquote>
<ol>
<li>API:<br>静态方法<code>ClassLoader.getSystemClassLoader()</code>：可以获得AppClassLoader</li>
<li><p>如果没有特别指定，则用户自定义的任何类加载器都将该类加载器作为它的父加载器，这点通过 <code>java.lang.ClassLoader</code> 的无参构造函数可以证明，代码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> <span class="title">ClassLoader</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>(checkCreateClassLoader(),getSystemClassLoader());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>获取classpath加载路径：<br><code>System.out.println(System.getProperty(&quot;java.class.path&quot;));</code></p>
</li>
<li>另外我们写的含有 main 函数的类的加载就是使用该类加载器进行加载的，证明如下：<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">    ClassLoader cl = App2.class.getClassLoader();</div><div class="line">    System.out.println(cl);</div><div class="line">    System.out.println(cl.getParent());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>运行结果如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sun.misc.Launcher$AppClassLoader@<span class="number">4554617</span>c</div><div class="line">sun.misc.Launcher$ExtClassLoader@<span class="number">677327</span>b6</div></pre></td></tr></table></figure>
<p>并且可以看出 AppClassLoader 的父加载器是 ExtClassLoader，那么 ExtClassLoader 是什么呢？</p>
<h3 id="ExtClassloader"><a href="#ExtClassloader" class="headerlink" title="ExtClassloader"></a>ExtClassloader</h3><blockquote>
<p>扩展类加载器，主要负责加载 Java 的扩展类库</p>
</blockquote>
<ol>
<li>加载的路径<br>默认加载 <code>JAVA_HOME/jre/lib/ext/</code> 目录下的所有 Jar 包或者由 <code>java.ext.dirs</code> 系统属性指定的 Jar 包<br>可以通过系统属性<code>java.ext.dirs</code>查看</li>
<li>ExtClassLoader 的父加载器为 null</li>
</ol>
<h3 id="BootstrapClassloader"><a href="#BootstrapClassloader" class="headerlink" title="BootstrapClassloader"></a>BootstrapClassloader</h3><blockquote>
<p>引导类加载器，又称启动类加载器，是最顶层的类加载器，主要用来加载 Java 核心类，如 rt.jar、resources.jar、charsets.jar 等。</p>
<p>需要注意的是它不是 java.lang.ClassLoader 的子类，而是由 JVM 自身实现的，该类为 C 语言实现，所以严格来说它不属于 Java 类加载器范畴，Java 程序访问不到该加载器。</p>
</blockquote>
<p>通过下面代码我们可以查看该加载器查找类的扫描路径。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</div><div class="line">	URL[] urls = sun.misc.Launcher.getBootstrapClassPath().getURLs();</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; urls.length; i++) &#123;</div><div class="line">		System.out.println(urls[i].toExternalForm());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>执行结果如下。</p>
<p><img src="https://ws1.sinaimg.cn/large/8747d788gy1foxqct6w91j21ub0g21kx.jpg" alt=""></p>
<p><code>String</code> 类就是 <code>rt.jar</code> 里面提供的，这个类我们经常用，下面我们看下 String 类的类加载器是什么。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;    </div><div class="line">    ClassLoader cl = String.class.getClassLoader();</div><div class="line">    System.out.println(cl);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>执行结果如下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">null</div></pre></td></tr></table></figure>
<p>可知由于 BootstrapClassloader 对 Java 不可见，所以返回了 null，我们也可以通过看某一个类的加载器是否为 null 来作为判断该类是不是使用 BootstrapClassloader 进行加载的依据。另外上面提到 ExtClassLoader 的 父加载器返回的 null，那是否说明 ExtClassLoader 的父加载器是 BootstrapClassloader呢？</p>
<h3 id="三种加载器关系"><a href="#三种加载器关系" class="headerlink" title="三种加载器关系"></a>三种加载器关系</h3><p>首先用一张图来表示三张图的关系如下：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/5879294-4d2114d3cb34e0b8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<ul>
<li>AppClassloader 的父加载器是 ExtClassloader。</li>
<li>ExtClassloader 的父加载器为 null，但是要注意的是 ExtClassloader 的父加载器并不是 BootstrapClassloader。</li>
</ul>
<h3 id="类加载器的构造"><a href="#类加载器的构造" class="headerlink" title="类加载器的构造"></a>类加载器的构造</h3><p>下面从源码来分析下 JVM 是如何构建内置 Classloader 的，具体是 rt.jar 包里面<code>sun.misc.Launcher</code>类。代码如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Launcher</span><span class="params">()</span>  </span></div><div class="line">      &#123;  </div><div class="line">        ExtClassLoader localExtClassLoader;  </div><div class="line">        <span class="keyword">try</span>  </div><div class="line">        &#123;  <span class="comment">//（1）首先创建了ExtClassLoader</span></div><div class="line">          localExtClassLoader = ExtClassLoader.getExtClassLoader();  </div><div class="line">        &#125;  </div><div class="line">        <span class="keyword">catch</span> (IOException localIOException1)  </div><div class="line">        &#123;  </div><div class="line">          <span class="keyword">throw</span> <span class="keyword">new</span> InternalError(<span class="string">"Could not create extension class loader"</span>);  </div><div class="line">        &#125;  </div><div class="line">        <span class="keyword">try</span>  </div><div class="line">        &#123;  <span class="comment">//（2）然后以ExtClassloader作为父加载器创建了AppClassLoader</span></div><div class="line">          <span class="keyword">this</span>.loader = AppClassLoader.getAppClassLoader(localExtClassLoader);  </div><div class="line">        &#125;  </div><div class="line">        <span class="keyword">catch</span> (IOException localIOException2)  </div><div class="line">        &#123;  </div><div class="line">          <span class="keyword">throw</span> <span class="keyword">new</span> InternalError(<span class="string">"Could not create application class loader"</span>);  </div><div class="line">        &#125;  <span class="comment">//（3）这个是个特殊的加载器后面会讲到，这里只需要知道默认下线程上下文加载器为appclassloader</span></div><div class="line">        Thread.currentThread().setContextClassLoader(<span class="keyword">this</span>.loader);  </div><div class="line"></div><div class="line">        ................</div></pre></td></tr></table></figure>
<p>代码（1）首先创建了 <code>ExtClassLoader</code> 类加载器，下面我们看看具体创建过程，打开 <code>ExtClassLoader.getExtClassLoader()</code> 的代码，如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExtClassLoader <span class="title">getExtClassLoader</span><span class="params">()</span>  </span></div><div class="line">      <span class="keyword">throws</span> IOException  </div><div class="line">    &#123;  </div><div class="line">      File[] arrayOfFile = getExtDirs();  </div><div class="line">      <span class="keyword">try</span>  </div><div class="line">      &#123;  </div><div class="line">        (ExtClassLoader)AccessController.doPrivileged(<span class="keyword">new</span> PrivilegedExceptionAction()  </div><div class="line">        &#123;  </div><div class="line">          <span class="keyword">public</span> Launcher.<span class="function">ExtClassLoader <span class="title">run</span><span class="params">()</span>  </span></div><div class="line">            <span class="keyword">throws</span> IOException  </div><div class="line">          &#123;  </div><div class="line">            <span class="keyword">int</span> i = <span class="keyword">this</span>.val$dirs.length;  </div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;  </div><div class="line">              MetaIndex.registerDirectory(<span class="keyword">this</span>.val$dirs[j]);  </div><div class="line">            &#125;  </div><div class="line">            <span class="comment">//(5)</span></div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Launcher.ExtClassLoader(<span class="keyword">this</span>.val$dirs);  </div><div class="line">          &#125;  </div><div class="line">        &#125;);  </div><div class="line">      &#125;  </div><div class="line">      <span class="keyword">catch</span> (PrivilegedActionException localPrivilegedActionException)  </div><div class="line">      &#123;  </div><div class="line">        <span class="keyword">throw</span> ((IOException)localPrivilegedActionException.getException());  </div><div class="line">      &#125;  </div><div class="line">    &#125;  </div><div class="line"></div><div class="line">   <span class="comment">//(6)</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> File[] getExtDirs()  </div><div class="line">    &#123;  </div><div class="line">      String str = System.getProperty(<span class="string">"java.ext.dirs"</span>);  </div><div class="line">      File[] arrayOfFile;  </div><div class="line">      <span class="keyword">if</span> (str != <span class="keyword">null</span>)  </div><div class="line">      &#123;  </div><div class="line">        StringTokenizer localStringTokenizer = <span class="keyword">new</span> StringTokenizer(str, File.pathSeparator);  </div><div class="line"></div><div class="line">        <span class="keyword">int</span> i = localStringTokenizer.countTokens();  </div><div class="line">        arrayOfFile = <span class="keyword">new</span> File[i];  </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;  </div><div class="line">          arrayOfFile[j] = <span class="keyword">new</span> File(localStringTokenizer.nextToken());  </div><div class="line">        &#125;  </div><div class="line">      &#125;  </div><div class="line">      <span class="keyword">else</span>  </div><div class="line">      &#123;  </div><div class="line">        arrayOfFile = <span class="keyword">new</span> File[<span class="number">0</span>];  </div><div class="line">      &#125;  </div><div class="line">      <span class="keyword">return</span> arrayOfFile;  </div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>从代码（6）可知，<code>ExtClassLoader</code> 类加载类扫描路径为 <code>java.ext.dirs</code>。下面我们看看代码（5），它说明 <code>ExtClassLoader</code> 的父加载器为 null，打开 <code>Launcher.ExtClassLoader</code> 的代码如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">ExtClassLoader</span><span class="params">(File[] paramArrayOfFile)</span></span></div><div class="line">   <span class="keyword">throws</span> IOException</div><div class="line"> &#123;</div><div class="line">  <span class="comment">//(7)第一个参数，就是父加载器的设置，这里传递了null。</span></div><div class="line">   <span class="keyword">super</span>(<span class="keyword">null</span>, Launcher.factory);</div><div class="line">   SharedSecrets.getJavaNetAccess()</div><div class="line">     .getURLClassPath(<span class="keyword">this</span>).initLookupCache(<span class="keyword">this</span>);</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>代码（2）以创建的<code>ExtClassloader</code> 作为父加载器创建了 <code>AppClassLoader</code>，下面看下 <code>AppClassLoader.getAppClassLoader</code> 的代码，如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ClassLoader <span class="title">getAppClassLoader</span><span class="params">(<span class="keyword">final</span> ClassLoader paramClassLoader)</span>  </span></div><div class="line">      <span class="keyword">throws</span> IOException  </div><div class="line">    &#123;  <span class="comment">//(8)</span></div><div class="line">      String str = System.getProperty(<span class="string">"java.class.path"</span>);  </div><div class="line">      <span class="keyword">final</span> File[] arrayOfFile = str == <span class="keyword">null</span> ? <span class="keyword">new</span> File[<span class="number">0</span>] : Launcher.getClassPath(str);  </div><div class="line"></div><div class="line">      (ClassLoader)AccessController.doPrivileged(<span class="keyword">new</span> PrivilegedAction()  </div><div class="line">      &#123;  </div><div class="line">        <span class="keyword">public</span> Launcher.<span class="function">AppClassLoader <span class="title">run</span><span class="params">()</span>  </span></div><div class="line">        &#123;  </div><div class="line">          URL[] arrayOfURL = <span class="keyword">this</span>.val$s == <span class="keyword">null</span> ? <span class="keyword">new</span> URL[<span class="number">0</span>] : Launcher.pathToURLs(arrayOfFile); </div><div class="line">          <span class="keyword">return</span> <span class="keyword">new</span> Launcher.AppClassLoader(arrayOfURL, paramClassLoader);  </div><div class="line">        &#125;  </div><div class="line">      &#125;);  </div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>由代码（8）可知 <code>AppClassLoader</code> 类加载扫描路径为为 <code>java.class.path</code>。下面看下 AppClassLoader 的父加载器的设置，看下 <code>Launcher.AppClassLoader</code> 的代，如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">AppClassLoader(URL[] paramArrayOfURL, ClassLoader paramClassLoader)</div><div class="line">   &#123;</div><div class="line">    <span class="comment">//paramClassLoader就是ExtClassloader</span></div><div class="line">     <span class="keyword">super</span>(paramClassLoader, Launcher.factory);</div><div class="line">     <span class="keyword">this</span>.ucp = SharedSecrets.getJavaNetAccess().getURLClassPath(<span class="keyword">this</span>);</div><div class="line">     <span class="keyword">this</span>.ucp.initLookupCache(<span class="keyword">this</span>);</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>代码（3）创建了一个与线程相关的类加载器，这个后面会讲到。</p>
<h3 id="类加载器原理"><a href="#类加载器原理" class="headerlink" title="类加载器原理"></a>类加载器原理</h3><blockquote>
<p>Java 类加载器使用的是委托机制，也就是一个类加载器在加载一个类时候会首先尝试让父类加载器来加载。</p>
</blockquote>
<p>那么问题来了，为啥使用这种方式？</p>
<blockquote>
<p>第一，这样可以避免重复加载，当父类加载器已经加载了该类的时候，就没有必要子 ClassLoader 再加载一次。</p>
<p>第二，考虑到安全因素，我们试想一下，如果不使用这种委托模式，那我们就可以随便使用自定义的类来动态替代 Java 核心 API 中类实现，比如我们自己写了个 String 类，包路径+类名与 rt.jar 里面的一样，如果不用委托机制，那么当 JVM 加载 String 类的时候会使用 AppClassLoader 加载我们自己定义的 String 类而不会去加载 rt.jar 里面的了。使用双亲委托则，当 JVM 加载 String 类的时候， AppClassLoader 会委托父类加载器 ExtClassLoader 来加载，ExtClassLoader 又会委托给 Bootstrcp ClassLoader 来加载，这样就不会加载自定义的 String 类了。</p>
</blockquote>
<p>下面我们从源码看如何实现委托机制。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">protected</span> Class&lt;?&gt; loadClass(String name,<span class="keyword">boolean</span> resolve)  </div><div class="line">       <span class="keyword">throws</span> ClassNotFoundException  </div><div class="line">   &#123;  </div><div class="line">       <span class="keyword">synchronized</span> (getClassLoadingLock(name)) &#123;  </div><div class="line">           <span class="comment">// 首先从jvm缓存查找该类</span></div><div class="line">           Class c = findLoadedClass(name); <span class="comment">// (1)</span></div><div class="line">           <span class="keyword">if</span> (c ==<span class="keyword">null</span>) &#123;  </div><div class="line">               longt0 = System.nanoTime();  </div><div class="line">               <span class="keyword">try</span> &#123;  <span class="comment">//然后委托给父类加载器进行加载</span></div><div class="line">                   <span class="keyword">if</span> (parent !=<span class="keyword">null</span>) &#123;  </div><div class="line">                       c = parent.loadClass(name,<span class="keyword">false</span>);  (<span class="number">2</span>)</div><div class="line">                   &#125; <span class="keyword">else</span> &#123;  <span class="comment">//如果父类加载器为null,则委托给BootStrap加载器加载</span></div><div class="line">                       c = findBootstrapClassOrNull(name);  (<span class="number">3</span>)</div><div class="line">                   &#125;  </div><div class="line">               &#125; <span class="keyword">catch</span> (ClassNotFoundExceptione) &#123;  </div><div class="line">                   <span class="comment">// ClassNotFoundException thrown if class not found  </span></div><div class="line">                   <span class="comment">// from the non-null parent class loader  </span></div><div class="line">               &#125;  </div><div class="line"></div><div class="line">               <span class="keyword">if</span> (c ==<span class="keyword">null</span>) &#123;  </div><div class="line">                   <span class="comment">// 若仍然没有找到则调用findclass查找</span></div><div class="line">                   <span class="comment">// to find the class.  </span></div><div class="line">                   longt1 = System.nanoTime();  </div><div class="line">                   c = findClass(name);  (<span class="number">4</span>)</div><div class="line"></div><div class="line">                   <span class="comment">// this is the defining class loader; record the stats  </span></div><div class="line">                   sun.misc.PerfCounter.getParentDelegationTime().addTime(t1 -t0);  </div><div class="line">                   sun.misc.PerfCounter.getFindClassTime().addElapsedTimeFrom(t1);  </div><div class="line">                   sun.misc.PerfCounter.getFindClasses().increment();  </div><div class="line">               &#125;  </div><div class="line">           &#125;  </div><div class="line">           <span class="keyword">if</span> (resolve) &#123;  </div><div class="line">               resolveClass(c);  <span class="comment">//（5）</span></div><div class="line">           &#125;  </div><div class="line">           returnc;  </div><div class="line">       &#125;  </div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>代码（1）表示从 JVM 缓存查找该类，如果该类之前被加载过，则直接从 JVM 缓存返回该类。</p>
<p>代码（2）表示如果 JVM 缓存不存在该类，则看当前类加载器是否有父加载器，如果有的话则委托父类加载器进行加载，否者调用（3），委托 BootStrapClassloader 进行加载，如果还是没有找到，则调用当前 Classloader 的 findclass 方法进行查找。</p>
<p>代码（5）则是当字节码加载到内存后进行链接操作，对文件格式和字节码验证，并为 static 字段分配空间并初始化，符号引用转为直接引用，访问控制，方法覆盖等，本文对这些不进入深入探讨。</p>
<p>从上面源码知道要想修改类加载委托机制，实现自己的载入策略，可以通过覆盖 ClassLoader 的 findClass 方法或者覆盖 loadClass 方法来实现。</p>
<blockquote>
<p>▲需要了解的是，”双亲委派”虽然是一般模型，但也有一些例外，比如：</p>
<ul>
<li>自定义的加载顺序：尽管不被建议，自定义的ClassLoader可以不遵从”双亲委派”这个约定，不过，即使不遵从，以”java”开头的类也不能被自定义类加载器加载，这是由Java的安全机制保证的，以避免混乱。</li>
<li>网状加载顺序：在OSGI框架中，类加载器之间的关系是一个网，每个OSGI模块有一个类加载器，不同模块之间可能有依赖关系，在一个模块加载一个类时，可能是从自己模块加载，也可能是委派给其他模块的类加载器加载。</li>
<li>父加载器委派给子加载器加载：典型的例子有JNDI服务(Java Naming and Directory Interface)，它是Java企业级应用中的一项服务，具体我们就不介绍了。</li>
</ul>
</blockquote>
<h3 id="ClassLoader-vs-Class-forName"><a href="#ClassLoader-vs-Class-forName" class="headerlink" title="ClassLoader vs Class.forName"></a>ClassLoader vs Class.forName</h3><p>在<a href="http://mp.weixin.qq.com/s?__biz=MzIxOTI1NTk5Nw==&amp;mid=2650047510&amp;idx=1&amp;sn=6d8873ffbfd31e802d87ebf4ac135f39&amp;chksm=8fde21c4b8a9a8d2df3eaec9a88ec9dfe748b2bfe7066cea0ea7c3dfc4f1f37d559305cccf7c&amp;scene=21#wechat_redirect" target="_blank" rel="external">反射</a>一节，我们介绍过Class的两个静态方法forName：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> Class&lt;?&gt; forName(String className)</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> Class&lt;?&gt; forName(String name, <span class="keyword">boolean</span> initialize, ClassLoader loader)</div></pre></td></tr></table></figure>
<p>第一个方法使用系统类加载器加载，第二个指定<code>ClassLoader</code>，参数<code>initialize</code>表示，加载后，是否执行类的初始化代码(如static语句块)，没有指定默认为true。</p>
<p><code>ClassLoader</code>的<code>loadClass</code>方法与<code>forName</code>方法都可以加载类，它们有什么不同呢？</p>
<p>基本是一样的，不过，有一个不同，<strong><code>ClassLoader</code>的<code>loadClass</code>不会执行类的初始化代码</strong>，看个例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CLInitDemo</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> </span>&#123;</div><div class="line">        <span class="keyword">static</span> &#123;</div><div class="line">            System.out.println(<span class="string">"hello"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        ClassLoader cl = ClassLoader.getSystemClassLoader();</div><div class="line">        String className = CLInitDemo.class.getName() + <span class="string">"$Hello"</span>;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            Class&lt;?&gt; cls = cl.loadClass(className);</div><div class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用ClassLoader加载静态内部类Hello，Hello有一个static语句块，输出”hello”，运行该程序，类被加载了，但没有任何输出，即static语句块没有被执行。如果将loadClass的语句换为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Class&lt;?&gt; cls = Class.forName(className);</div></pre></td></tr></table></figure>
<p>则static语句块会被执行，屏幕将输出”hello”。</p>
<h2 id="一种特殊的类加载器：ContextClassLoader"><a href="#一种特殊的类加载器：ContextClassLoader" class="headerlink" title="一种特殊的类加载器：ContextClassLoader"></a>一种特殊的类加载器：ContextClassLoader</h2><blockquote>
<p><code>ContextClassLoader</code> 是一种与线程相关的类加载器，类似 <code>ThreadLocal</code>，每个线程对应一个上下文类加载器：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;     <span class="comment">/* The context ClassLoader for this thread */</span></div><div class="line">&gt;     <span class="keyword">private</span> ClassLoader contextClassLoader;</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<p>&gt;</p>
<blockquote>
<p>在使用时，一般都用下面的经典结构。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="comment">//获取当前线程上下文类加载器</span></div><div class="line">&gt; ClassLoader classLoader = Thread.currentThread().getContextClassLoader();</div><div class="line">&gt; <span class="keyword">try</span> &#123;<span class="comment">//设置当前线程上下文类加载器为targetTccl</span></div><div class="line">&gt;     Thread.currentThread().setContextClassLoader(targetTccl);</div><div class="line">&gt;     <span class="comment">//doSomething </span></div><div class="line">&gt;     doSomething();</div><div class="line">&gt; &#125; <span class="keyword">finally</span> &#123;<span class="comment">//设置当前线程上下文加载器为原始加载器</span></div><div class="line">&gt;     Thread.currentThread().setContextClassLoader(classLoader);</div><div class="line">&gt; &#125;</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<p>&gt;</p>
<blockquote>
<p>首先获取当前线程的线程上下文类加载器并保存到方法栈，然后设置当前线程上下文类加器为自己的类加载器。</p>
<p><code>doSomething</code> 里面则调用了 <code>Thread.currentThread().getContextClassLoader()</code>，获取当前线程上下文类加载器做某些事情。</p>
<p>最后在设置当前线程上下文类加载器为老的类加载器。</p>
</blockquote>
<p>那么这其中的奥秘和使用场景是什么？我们知道 Java 默认的类加载机制是委托机制，但是有些时候需要破坏这种机制。</p>
<p>具体来说，比如 Java 中的 SPI（Service Provider Interface）是面向接口编程的，服务规则提供者会在 JRE 的核心 API 里面提供服务访问接口，而具体实现则由其他开发商提供。我们知道 Java 核心 API，比如rt.jar包，是使用 <code>Bootstrap CalssLoader</code> 加载的，而用户提供的 Jar 包再由 <code>Appclassloader</code> 加载。并且我们知道如果一个类由类加载器 A 加载，那么这个类依赖类也是由相同的类加载器加载。那么 Bootstrap ClassLoader 加载了服务提供者在 rt.jar 里面提供的搜索开发商提供的实现类的 API 类（<code>ServiceLoader</code>），那么这些 API 类里面依赖的类应该也是由 <code>Bootstrap CalssLoader</code> 来加载。而上面说了用户提供的 Jar 包再由 <code>Appclassloader</code> 加载，所以需要一种违反双亲委派模型的方法，线程上下文类加载器就是为了解决这个问题。</p>
<p>下面使用 JDBC 4 来具体说明，JDBC 4 是基于 SPI 机制来发现驱动提供商提供的实现类，提供者只需在 JDBC 实现的 Jar 的 <code>META-INF/services/java.sql.Driver</code> 文件里指定实现类的方式暴露驱动提供者。例如 MySQL 实现的 Jar，如下。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/5879294-5bc66b9ae0be8415.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="screenshot.png"></p>
<p>而 MySQL 的驱动如下实现了 java.sql.Driver。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">mysql</span>.<span class="title">jdbc</span>.<span class="title">Driver</span> <span class="keyword">extends</span> <span class="title">com</span>.<span class="title">mysql</span>.<span class="title">jdbc</span>.<span class="title">NonRegisteringDriver</span> <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">sql</span>.<span class="title">Driver</span></span></div></pre></td></tr></table></figure>
<p>OK，下面我们写个测试代码，看看具体是如何工作的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">               <span class="comment">//(1)</span></div><div class="line">        ServiceLoader&lt;Driver&gt; loader = ServiceLoader.load(Driver.class);</div><div class="line">               <span class="comment">//(2)</span></div><div class="line">        Iterator&lt;Driver&gt; iterator = loader.iterator();</div><div class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</div><div class="line">            Driver driver = (Driver) iterator.next();</div><div class="line">            System.out.println(<span class="string">"driver:"</span> + driver.getClass() + <span class="string">",loader:"</span> + driver.getClass().getClassLoader());</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//(3)</span></div><div class="line">        System.out.println(<span class="string">"current thread contextloader:"</span> + Thread.currentThread().getContextClassLoader());</div><div class="line">               <span class="comment">//(4)</span></div><div class="line">        System.out.println(<span class="string">"ServiceLoader loader:"</span> + ServiceLoader.class.getClassLoader());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后引入 MySQL 驱动的 Jar 包，执行结果如下。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">driver:class com.mysql.jdbc.Driver,loader:sun.misc.Launcher$AppClassLoader@4554617c</div><div class="line">current thread contextloader:sun.misc.Launcher$AppClassLoader@4554617c</div><div class="line">ServiceLoader loader:null</div></pre></td></tr></table></figure>
<p>从执行结果可以知道 ServiceLoader 的加载器为 Bootstarp，因为这里输出了 null，并且从该类在 rt.jar 里面，也可以证明。</p>
<p>当前线程上下文类加载器为 AppClassLoader。而 com.mysql.jdbc.Driver 则使用 AppClassLoader 加载。我们知道如果一个类中引用了另外一个类，那么被引用的类也应该由引用方类加载器来加载，而现在则是引用方 ServiceLoader 使用 BootStarpClassloader 加载，被引用方则使用子加载器 APPClassLoader 来加载了，是不是很诡异。</p>
<p>下面我们来看下 ServiceLoader 的 load 方法源码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceLoader</span>&lt;<span class="title">S</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">S</span>&gt; </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;S&gt; <span class="function">ServiceLoader&lt;S&gt; <span class="title">load</span><span class="params">(Class&lt;S&gt; service)</span> </span>&#123;</div><div class="line">        <span class="comment">// （5）获取当前线程上下文加载器</span></div><div class="line">        ClassLoader cl = Thread.currentThread().getContextClassLoader();</div><div class="line">        <span class="keyword">return</span> ServiceLoader.load(service, cl);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;S&gt; <span class="function">ServiceLoader&lt;S&gt; <span class="title">load</span><span class="params">(Class&lt;S&gt; service, ClassLoader loader)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ServiceLoader&lt;&gt;(service, loader);</div><div class="line">    &#125;</div><div class="line">       <span class="comment">//(6)</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">ServiceLoader</span><span class="params">(Class&lt;S&gt; svc, ClassLoader cl)</span> </span>&#123;</div><div class="line">        service = svc;</div><div class="line">        loader = cl;</div><div class="line">        reload();</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>代码（5）获取了当前线程上下文加载器，这里是 AppClassLoader。</p>
<p>代码（6）传递该类加载器到新构造的 ServiceLoader 的成员变量 loader。那么这个 loader 什么时候使用的呢？下面我们看下 LazyIterator 的 next() 方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">  <span class="function"><span class="keyword">public</span> S <span class="title">next</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (acc == <span class="keyword">null</span>) &#123;</div><div class="line">        <span class="keyword">return</span> nextService();</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        PrivilegedAction&lt;S&gt; action = <span class="keyword">new</span> PrivilegedAction&lt;S&gt;() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> S <span class="title">run</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> nextService(); &#125;</div><div class="line">        &#125;;</div><div class="line">        <span class="keyword">return</span> AccessController.doPrivileged(action, acc);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> S <span class="title">nextService</span><span class="params">()</span> </span>&#123;</div><div class="line"> ...</div><div class="line">  <span class="keyword">try</span> &#123;</div><div class="line">      <span class="comment">//（7）使用loader类加载器加载</span></div><div class="line">      c = Class.forName(cn, <span class="keyword">false</span>, loader);</div><div class="line">  &#125; <span class="keyword">catch</span> (ClassNotFoundException x) &#123;</div><div class="line">      fail(service,</div><div class="line">           <span class="string">"Provider "</span> + cn + <span class="string">" not found"</span>);</div><div class="line">  &#125;</div><div class="line"> ...</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>代码（7）使用 loader 也就是 AppClassLoader 加载具体的驱动实现类。至于 cn 是怎么来的，读者可以参见 LazyIterator 的 hasNext() 方法。</p>
<p>到这里再回想下，ContextClassLoader 的作用是为了破坏 Java 类加载委托机制，JDBC 规范定义了一个 JDBC 接口，然后使用 SPI 机制提供的一个叫做 ServiceLoader 的 Java 核心 API（rt.jar 里面提供）用来扫描服务实现类，服务实现者提供的 Jar，比如 MySQL 驱动则是放到我们的 classpath 下面，从上文知道默认线程上下文类加载器就是 AppClassLoader，所以例子里面没有显示在调用 ServiceLoader 前设置线程上下文类加载器为 AppClassLoader，ServiceLoader 内部则获取当前线程上下文类加载器（这里为 AppClassLoader）来加载服务实现者的类，这里加载了 classpath 下的MySQL 的驱动实现。</p>
<p>读者可以尝试在调用 ServiceLoader 的 load 方法前设置线程上下文类加器为 ExtclassLoder，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Thread.currentThread().setContextClassLoader(main函数所在的类.class.getClassLoader().getParent());</div></pre></td></tr></table></figure>
<p>然后再运行本例子，设置后 ServiceLoader 内部则获取当前线程上下文类加载器为 ExtclassLoder，然后会尝试使用 ExtclassLoder 去查找 JDBC 驱动实现，而 ExtclassLoder 扫描类的路径为 JAVA_HOME/jre/lib/ext/，而这下面没有驱动实现的 Jar，所以不会查找到驱动。</p>
<p>总结下，<strong>当父类加载器需要加载子类加载器中的资源时，可以通过设置和获取线程上下文类加载器来实现</strong>。</p>
<hr>
<p>个人总结：</p>
<p>这里以大概跟踪了ServiceLoader的代码，讲了如何利用ContextClassLoader；</p>
<p><code>ServiceLoader</code>的作用：使用线程传过来的ClassLoader来加载Class</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;S&gt; <span class="function">ServiceLoader&lt;S&gt; <span class="title">load</span><span class="params">(Class&lt;S&gt; service)</span> </span>&#123;</div><div class="line">    ClassLoader cl = Thread.currentThread().getContextClassLoader();</div><div class="line">    <span class="keyword">return</span> ServiceLoader.load(service, cl);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;S&gt; <span class="function">ServiceLoader&lt;S&gt; <span class="title">load</span><span class="params">(Class&lt;S&gt; service,</span></span></div><div class="line">                                        ClassLoader loader) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ServiceLoader&lt;&gt;(service, loader);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="title">ServiceLoader</span><span class="params">(Class&lt;S&gt; svc, ClassLoader cl)</span> </span>&#123;</div><div class="line">    service = Objects.requireNonNull(svc, <span class="string">"Service interface cannot be null"</span>);</div><div class="line">    loader = (cl == <span class="keyword">null</span>) ? ClassLoader.getSystemClassLoader() : cl;</div><div class="line">    acc = (System.getSecurityManager() != <span class="keyword">null</span>) ? AccessController.getContext() : <span class="keyword">null</span>;</div><div class="line">    reload();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a href="http://alicharles.com/article/java-spi-serviceloader/" target="_blank" rel="external">关于ContextClassLoader的另一篇文章</a></p>
<h2 id="Tomcat-ClassLoader（略）"><a href="#Tomcat-ClassLoader（略）" class="headerlink" title="Tomcat ClassLoader（略）"></a>Tomcat ClassLoader（略）</h2><h2 id="使用自定义类加载器实现模块隔离"><a href="#使用自定义类加载器实现模块隔离" class="headerlink" title="使用自定义类加载器实现模块隔离"></a>使用自定义类加载器实现模块隔离</h2><h2 id="自定义ClassLoader的应用-热部署"><a href="#自定义ClassLoader的应用-热部署" class="headerlink" title="自定义ClassLoader的应用 - 热部署"></a>自定义ClassLoader的应用 - 热部署</h2><p>参考：<a href="http://www.cnblogs.com/swiftma/p/6901301.html" target="_blank" rel="external">Java编程的逻辑 (87) - 类加载机制</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/java/" rel="tag"># java</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/03/20/java/多线程/ThreadLocal/" rel="next" title="ThreadLocal">
                <i class="fa fa-chevron-left"></i> ThreadLocal
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/03/20/java/java基础/内部类的本质 /" rel="prev" title="内部类的本质">
                内部类的本质 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="donate-btn">作者</div>
    <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">FlyCloud Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">生命在于折腾!</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://flycloud.me/images/blog/avatar.jpg"
               alt="flycloud" />
          <p class="site-author-name" itemprop="name">flycloud</p>
           
              <p class="site-description motion-element" itemprop="description">Stay Hungry,Stay Foolish</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">75</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">32</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">47</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">flycloud : Stay Hungry,Stay Foolish</span>
</div>



        
<div class="busuanzi-count">
  <script async src="https:/busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  
</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

 
  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery.lazyload/1.9.3/jquery.lazyload.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.ui.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

<a id="hamburger" class="mm-slideout" href="#mmenu"><span></span></a>

<nav id="mmenu">
     <ul>

     </ul>
 </nav>
<link type="text/css" rel="stylesheet" href="http://cdn.bootcss.com/jQuery.mmenu/5.5.3/core/css/jquery.mmenu.all.css" />
<link type="text/css" rel="stylesheet" href="/css/flyCloudMenu.css" />
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jQuery.mmenu/5.5.3/core/js/jquery.mmenu.min.all.js"></script>


<script type="text/javascript">
  $(function () {
          $.getJSON("/json/menu.json",function(data){
            $.each( data, function() {
            var html="<li id='" + this.id + "'>" +"<span>"+this.text + "</span></li>"
            var chirldHtml="<ul><li id='"+this.id+"'>"+"<span>"+this.text+"</span></li></ul>"
            if(this.pid==''){
                $('#mmenu>ul:first').append(html);
              }else{
              if($('li#'+this.pid+">ul").length==0){
                 $('#'+this.pid).append(chirldHtml);
              }else{
                $('li#'+this.pid+">ul").append(html);
              }
             }
            });

            
              var html="<li>" +"<a href='/2016/01/13/Markdown/markdown-style-guide/'>"+ " markdown style guide</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2016/01/13/Markdown/markdown-style-guide/'>"+" markdown style guide</a></li></ul>"
              
                   if($('li#'+"160>ul").length==0){
                    $('li#'+"160").append(chirldHtml);
                   }else{
                    $('li#'+"160>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/11/20/maven/maven环境差异化应用/'>"+ " maven环境差异化应用</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/11/20/maven/maven环境差异化应用/'>"+" maven环境差异化应用</a></li></ul>"
              
                   if($('li#'+"220>ul").length==0){
                    $('li#'+"220").append(chirldHtml);
                   }else{
                    $('li#'+"220>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/11/20/maven/mirror和repository 区别/'>"+ " Maven：mirror和repository 区别</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/11/20/maven/mirror和repository 区别/'>"+" Maven：mirror和repository 区别</a></li></ul>"
              
                   if($('li#'+"220>ul").length==0){
                    $('li#'+"220").append(chirldHtml);
                   }else{
                    $('li#'+"220>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/12/20/架构&高并发/Java并发编程与高并发解决方案/'>"+ " Java并发编程与高并发解决方案</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/12/20/架构&高并发/Java并发编程与高并发解决方案/'>"+" Java并发编程与高并发解决方案</a></li></ul>"
              
                   if($('li#'+"400>ul").length==0){
                    $('li#'+"400").append(chirldHtml);
                   }else{
                    $('li#'+"400>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/09/25/servlet/Servlet详解/'>"+ " Servlet详解</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/09/25/servlet/Servlet详解/'>"+" Servlet详解</a></li></ul>"
              
                   if($('li#'+"70>ul").length==0){
                    $('li#'+"70").append(chirldHtml);
                   }else{
                    $('li#'+"70>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/11/20/架构&高并发/网站海量数据和高并发解决方案(一)/'>"+ " 网站海量数据和高并发解决方案(一)</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/11/20/架构&高并发/网站海量数据和高并发解决方案(一)/'>"+" 网站海量数据和高并发解决方案(一)</a></li></ul>"
              
                   if($('li#'+"400>ul").length==0){
                    $('li#'+"400").append(chirldHtml);
                   }else{
                    $('li#'+"400>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/11/20/架构&高并发/网站海量数据和高并发解决方案(二)/'>"+ " 网站海量数据和高并发解决方案(二)</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/11/20/架构&高并发/网站海量数据和高并发解决方案(二)/'>"+" 网站海量数据和高并发解决方案(二)</a></li></ul>"
              
                   if($('li#'+"400>ul").length==0){
                    $('li#'+"400").append(chirldHtml);
                   }else{
                    $('li#'+"400>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/01/30/集锦/50个最常用的UnixLinux命令/'>"+ " 50个最常用的UnixLinux命令</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/01/30/集锦/50个最常用的UnixLinux命令/'>"+" 50个最常用的UnixLinux命令</a></li></ul>"
              
                   if($('li#'+"320>ul").length==0){
                    $('li#'+"320").append(chirldHtml);
                   }else{
                    $('li#'+"320>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/03/02/集锦/graphics/'>"+ " 程序员必知的七个图形工具</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/03/02/集锦/graphics/'>"+" 程序员必知的七个图形工具</a></li></ul>"
              
                   if($('li#'+"320>ul").length==0){
                    $('li#'+"320").append(chirldHtml);
                   }else{
                    $('li#'+"320>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/03/30/集锦/promotion_rule/'>"+ " 零售行业优惠规则分析</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/03/30/集锦/promotion_rule/'>"+" 零售行业优惠规则分析</a></li></ul>"
              
                   if($('li#'+"320>ul").length==0){
                    $('li#'+"320").append(chirldHtml);
                   }else{
                    $('li#'+"320>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/05/30/集锦/shell/'>"+ " Shell脚本编程30分钟入门</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/05/30/集锦/shell/'>"+" Shell脚本编程30分钟入门</a></li></ul>"
              
                   if($('li#'+"320>ul").length==0){
                    $('li#'+"320").append(chirldHtml);
                   }else{
                    $('li#'+"320>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/10/26/数据库/MySQL/'>"+ " MySQL 必看</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/10/26/数据库/MySQL/'>"+" MySQL 必看</a></li></ul>"
              
                   if($('li#'+"340>ul").length==0){
                    $('li#'+"340").append(chirldHtml);
                   }else{
                    $('li#'+"340>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/10/26/数据库/MySQ大表优化/'>"+ " MySQL大表优化方案</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/10/26/数据库/MySQ大表优化/'>"+" MySQL大表优化方案</a></li></ul>"
              
                   if($('li#'+"340>ul").length==0){
                    $('li#'+"340").append(chirldHtml);
                   }else{
                    $('li#'+"340>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/10/26/数据库/分库分表的几种常见形式以及可能遇到的难/'>"+ " 分库分表的几种常见玩法及如何解决跨库查询等问题</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/10/26/数据库/分库分表的几种常见形式以及可能遇到的难/'>"+" 分库分表的几种常见玩法及如何解决跨库查询等问题</a></li></ul>"
              
                   if($('li#'+"340>ul").length==0){
                    $('li#'+"340").append(chirldHtml);
                   }else{
                    $('li#'+"340>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/10/26/数据库/大众点评订单系统分库分表实践/'>"+ " 大众点评订单系统分库分表实践</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/10/26/数据库/大众点评订单系统分库分表实践/'>"+" 大众点评订单系统分库分表实践</a></li></ul>"
              
                   if($('li#'+"340>ul").length==0){
                    $('li#'+"340").append(chirldHtml);
                   }else{
                    $('li#'+"340>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/01/09/dubbo/dubbo学习/dubbo容器启动/'>"+ " dubbo容器启动</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/01/09/dubbo/dubbo学习/dubbo容器启动/'>"+" dubbo容器启动</a></li></ul>"
              
                   if($('li#'+"301>ul").length==0){
                    $('li#'+"301").append(chirldHtml);
                   }else{
                    $('li#'+"301>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/01/09/dubbo/dubbo学习/dubbo服务启动/'>"+ " dubbo服务启动</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/01/09/dubbo/dubbo学习/dubbo服务启动/'>"+" dubbo服务启动</a></li></ul>"
              
                   if($('li#'+"301>ul").length==0){
                    $('li#'+"301").append(chirldHtml);
                   }else{
                    $('li#'+"301>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/10/11/front/frontTec/前端常见跨域解决方案（全）/'>"+ " 前端常见跨域解决方案（全）</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/10/11/front/frontTec/前端常见跨域解决方案（全）/'>"+" 前端常见跨域解决方案（全）</a></li></ul>"
              
                   if($('li#'+"141>ul").length==0){
                    $('li#'+"141").append(chirldHtml);
                   }else{
                    $('li#'+"141>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/09/01/git&github/git/git远程操作详解/'>"+ " Git远程操作详解</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/09/01/git&github/git/git远程操作详解/'>"+" Git远程操作详解</a></li></ul>"
              
                   if($('li#'+"51>ul").length==0){
                    $('li#'+"51").append(chirldHtml);
                   }else{
                    $('li#'+"51>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/01/31/front/jquery/jQuery-plugin-authoring/'>"+ " 如何编写 jQuery 插件</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/01/31/front/jquery/jQuery-plugin-authoring/'>"+" 如何编写 jQuery 插件</a></li></ul>"
              
                   if($('li#'+"141>ul").length==0){
                    $('li#'+"141").append(chirldHtml);
                   }else{
                    $('li#'+"141>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/09/05/git&github/github/github wiki下载/'>"+ " github wiki下载</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/09/05/git&github/github/github wiki下载/'>"+" github wiki下载</a></li></ul>"
              
                   if($('li#'+"52>ul").length==0){
                    $('li#'+"52").append(chirldHtml);
                   }else{
                    $('li#'+"52>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/09/05/git&github/github/github项目排名/'>"+ " github项目排名</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/09/05/git&github/github/github项目排名/'>"+" github项目排名</a></li></ul>"
              
                   if($('li#'+"52>ul").length==0){
                    $('li#'+"52").append(chirldHtml);
                   }else{
                    $('li#'+"52>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/05/16/java/java基础/2017-05-16-java-collection/'>"+ " Java - 集合框架完全解析</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/05/16/java/java基础/2017-05-16-java-collection/'>"+" Java - 集合框架完全解析</a></li></ul>"
              
                   if($('li#'+"261>ul").length==0){
                    $('li#'+"261").append(chirldHtml);
                   }else{
                    $('li#'+"261>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/01/09/java/java基础/2016-10-18-JavaCryptography/'>"+ " Java的加密解密</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/01/09/java/java基础/2016-10-18-JavaCryptography/'>"+" Java的加密解密</a></li></ul>"
              
                   if($('li#'+"261>ul").length==0){
                    $('li#'+"261").append(chirldHtml);
                   }else{
                    $('li#'+"261>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/03/20/java/java基础/Java集合/'>"+ " java 集合</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/03/20/java/java基础/Java集合/'>"+" java 集合</a></li></ul>"
              
                   if($('li#'+"261>ul").length==0){
                    $('li#'+"261").append(chirldHtml);
                   }else{
                    $('li#'+"261>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/03/20/java/java基础/内部类的本质 /'>"+ " 内部类的本质</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/03/20/java/java基础/内部类的本质 /'>"+" 内部类的本质</a></li></ul>"
              
                   if($('li#'+"261>ul").length==0){
                    $('li#'+"261").append(chirldHtml);
                   }else{
                    $('li#'+"261>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/11/20/java/java基础/java 注解总结/'>"+ " java 注解总结</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/11/20/java/java基础/java 注解总结/'>"+" java 注解总结</a></li></ul>"
              
                   if($('li#'+"261>ul").length==0){
                    $('li#'+"261").append(chirldHtml);
                   }else{
                    $('li#'+"261>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2016/06/26/java/日志/log4j例子/'>"+ " Log4j例子</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2016/06/26/java/日志/log4j例子/'>"+" Log4j例子</a></li></ul>"
              
                   if($('li#'+"262>ul").length==0){
                    $('li#'+"262").append(chirldHtml);
                   }else{
                    $('li#'+"262>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2016/06/26/java/日志/log4j学习/'>"+ " Log4j学习</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2016/06/26/java/日志/log4j学习/'>"+" Log4j学习</a></li></ul>"
              
                   if($('li#'+"262>ul").length==0){
                    $('li#'+"262").append(chirldHtml);
                   }else{
                    $('li#'+"262>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/12/12/java/日志/slf4j log4j logback关系详解和相关用法/'>"+ " slf4j log4j logback关系详解和相关用法</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/12/12/java/日志/slf4j log4j logback关系详解和相关用法/'>"+" slf4j log4j logback关系详解和相关用法</a></li></ul>"
              
                   if($('li#'+"262>ul").length==0){
                    $('li#'+"262").append(chirldHtml);
                   }else{
                    $('li#'+"262>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2016/07/14/myBatis/MBG/MyBatis-generator 自动生成MyBatis代码/'>"+ " MyBatis-generator 自动生成MyBatis代码</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2016/07/14/myBatis/MBG/MyBatis-generator 自动生成MyBatis代码/'>"+" MyBatis-generator 自动生成MyBatis代码</a></li></ul>"
              
                   if($('li#'+"200>ul").length==0){
                    $('li#'+"200").append(chirldHtml);
                   }else{
                    $('li#'+"200>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2016/07/14/myBatis/MBG/MyBatis配件文件详解/'>"+ " MyBatis generator 配置文件详解</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2016/07/14/myBatis/MBG/MyBatis配件文件详解/'>"+" MyBatis generator 配置文件详解</a></li></ul>"
              
                   if($('li#'+"200>ul").length==0){
                    $('li#'+"200").append(chirldHtml);
                   }else{
                    $('li#'+"200>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/11/21/myBatis/MBG/MyBatis-generator 分析/'>"+ " MyBatis-generator 分析</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/11/21/myBatis/MBG/MyBatis-generator 分析/'>"+" MyBatis-generator 分析</a></li></ul>"
              
                   if($('li#'+"200>ul").length==0){
                    $('li#'+"200").append(chirldHtml);
                   }else{
                    $('li#'+"200>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/12/19/myBatis/mybatis学习/Mybatis二级缓存/'>"+ " Mybatis二级缓存</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/12/19/myBatis/mybatis学习/Mybatis二级缓存/'>"+" Mybatis二级缓存</a></li></ul>"
              
                   if($('li#'+"180>ul").length==0){
                    $('li#'+"180").append(chirldHtml);
                   }else{
                    $('li#'+"180>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2016/07/14/myBatis/MBG/MybatisGeneator/'>"+ " MyBatis-generator</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2016/07/14/myBatis/MBG/MybatisGeneator/'>"+" MyBatis-generator</a></li></ul>"
              
                   if($('li#'+"200>ul").length==0){
                    $('li#'+"200").append(chirldHtml);
                   }else{
                    $('li#'+"200>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/12/19/myBatis/mybatis学习/深入了解MyBatis二级缓存/'>"+ " Mybatis二级缓存</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/12/19/myBatis/mybatis学习/深入了解MyBatis二级缓存/'>"+" Mybatis二级缓存</a></li></ul>"
              
                   if($('li#'+"180>ul").length==0){
                    $('li#'+"180").append(chirldHtml);
                   }else{
                    $('li#'+"180>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/11/17/myBatis/mybatis学习/Mybatis-spring整合/'>"+ " MyBatis spring整合</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/11/17/myBatis/mybatis学习/Mybatis-spring整合/'>"+" MyBatis spring整合</a></li></ul>"
              
                   if($('li#'+"180>ul").length==0){
                    $('li#'+"180").append(chirldHtml);
                   }else{
                    $('li#'+"180>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/12/05/rocketMQ/rocketMQ学习/RocketMQ命令/'>"+ " RocketMQ命令</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/12/05/rocketMQ/rocketMQ学习/RocketMQ命令/'>"+" RocketMQ命令</a></li></ul>"
              
                   if($('li#'+"241>ul").length==0){
                    $('li#'+"241").append(chirldHtml);
                   }else{
                    $('li#'+"241>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/12/04/rocketMQ/rocketMQ学习/十分钟入门RocketMQ/'>"+ " 十分钟入门RocketMQ</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/12/04/rocketMQ/rocketMQ学习/十分钟入门RocketMQ/'>"+" 十分钟入门RocketMQ</a></li></ul>"
              
                   if($('li#'+"241>ul").length==0){
                    $('li#'+"241").append(chirldHtml);
                   }else{
                    $('li#'+"241>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/12/11/rocketMQ/rocketMQ学习/消息ACK机制及消费进度管理/'>"+ " 消息ACK机制及消费进度管理</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/12/11/rocketMQ/rocketMQ学习/消息ACK机制及消费进度管理/'>"+" 消息ACK机制及消费进度管理</a></li></ul>"
              
                   if($('li#'+"241>ul").length==0){
                    $('li#'+"241").append(chirldHtml);
                   }else{
                    $('li#'+"241>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/12/04/rocketMQ/rocketMQ学习/RocketMQ基础/'>"+ " RocketMQ开发指南</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/12/04/rocketMQ/rocketMQ学习/RocketMQ基础/'>"+" RocketMQ开发指南</a></li></ul>"
              
                   if($('li#'+"241>ul").length==0){
                    $('li#'+"241").append(chirldHtml);
                   }else{
                    $('li#'+"241>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/11/30/spring&springMvc/spring/2016-07-25-spring-interview-details/'>"+ " Spring、Hibernate、Mybatis面试相关知识点</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/11/30/spring&springMvc/spring/2016-07-25-spring-interview-details/'>"+" Spring、Hibernate、Mybatis面试相关知识点</a></li></ul>"
              
                   if($('li#'+"101>ul").length==0){
                    $('li#'+"101").append(chirldHtml);
                   }else{
                    $('li#'+"101>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/09/25/spring&springMvc/spring/BeanPostProcessor/'>"+ " BeanPostProcessor</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/09/25/spring&springMvc/spring/BeanPostProcessor/'>"+" BeanPostProcessor</a></li></ul>"
              
                   if($('li#'+"101>ul").length==0){
                    $('li#'+"101").append(chirldHtml);
                   }else{
                    $('li#'+"101>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/12/04/spring&springMvc/spring/Environment abstraction/'>"+ " Environment abstraction</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/12/04/spring&springMvc/spring/Environment abstraction/'>"+" Environment abstraction</a></li></ul>"
              
                   if($('li#'+"101>ul").length==0){
                    $('li#'+"101").append(chirldHtml);
                   }else{
                    $('li#'+"101>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/11/07/spring&springMvc/spring/How to use the Spring FactoryBean/'>"+ " How to use the Spring FactoryBean</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/11/07/spring&springMvc/spring/How to use the Spring FactoryBean/'>"+" How to use the Spring FactoryBean</a></li></ul>"
              
                   if($('li#'+"101>ul").length==0){
                    $('li#'+"101").append(chirldHtml);
                   }else{
                    $('li#'+"101>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/07/14/spring&springMvc/spring/Spring事务配置解惑/'>"+ " Spring事务配置解惑</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/07/14/spring&springMvc/spring/Spring事务配置解惑/'>"+" Spring事务配置解惑</a></li></ul>"
              
                   if($('li#'+"101>ul").length==0){
                    $('li#'+"101").append(chirldHtml);
                   }else{
                    $('li#'+"101>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/08/14/spring&springMvc/spring/Spring与线程安全/'>"+ " Spring与线程安全</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/08/14/spring&springMvc/spring/Spring与线程安全/'>"+" Spring与线程安全</a></li></ul>"
              
                   if($('li#'+"101>ul").length==0){
                    $('li#'+"101").append(chirldHtml);
                   }else{
                    $('li#'+"101>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/12/14/spring&springMvc/spring/spring单例与线程并发/'>"+ " spring单例与线程并发</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/12/14/spring&springMvc/spring/spring单例与线程并发/'>"+" spring单例与线程并发</a></li></ul>"
              
                   if($('li#'+"101>ul").length==0){
                    $('li#'+"101").append(chirldHtml);
                   }else{
                    $('li#'+"101>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/09/25/spring&springMvc/spring/spring-differerce-between-application-context-and-servlet-context/'>"+ " ServletContext与ApplicationContext的区别</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/09/25/spring&springMvc/spring/spring-differerce-between-application-context-and-servlet-context/'>"+" ServletContext与ApplicationContext的区别</a></li></ul>"
              
                   if($('li#'+"101>ul").length==0){
                    $('li#'+"101").append(chirldHtml);
                   }else{
                    $('li#'+"101>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/11/30/spring&springMvc/spring/spring 自动装配/'>"+ " spring 自动装配</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/11/30/spring&springMvc/spring/spring 自动装配/'>"+" spring 自动装配</a></li></ul>"
              
                   if($('li#'+"101>ul").length==0){
                    $('li#'+"101").append(chirldHtml);
                   }else{
                    $('li#'+"101>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/03/13/spring&springMvc/spring/使用Spring特性实现接口多实现类的动态调用/'>"+ " 使用Spring特性实现接口多实现类的动态调用</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/03/13/spring&springMvc/spring/使用Spring特性实现接口多实现类的动态调用/'>"+" 使用Spring特性实现接口多实现类的动态调用</a></li></ul>"
              
                   if($('li#'+"101>ul").length==0){
                    $('li#'+"101").append(chirldHtml);
                   }else{
                    $('li#'+"101>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/11/30/spring&springMvc/spring/基于Java的容器配置/'>"+ " 基于Java的容器配置</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/11/30/spring&springMvc/spring/基于Java的容器配置/'>"+" 基于Java的容器配置</a></li></ul>"
              
                   if($('li#'+"101>ul").length==0){
                    $('li#'+"101").append(chirldHtml);
                   }else{
                    $('li#'+"101>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/09/06/spring&springMvc/springMVC/2017-07-31-RESTful_api_develop-api_doc/'>"+ " 接口开发从前到后-文档</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/09/06/spring&springMvc/springMVC/2017-07-31-RESTful_api_develop-api_doc/'>"+" 接口开发从前到后-文档</a></li></ul>"
              
                   if($('li#'+"102>ul").length==0){
                    $('li#'+"102").append(chirldHtml);
                   }else{
                    $('li#'+"102>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/09/06/spring&springMvc/springMVC/2014-08-28-what-does-mvc-annotation-driven-do/'>"+ " mvc:annotation-driven到底帮我们做了什么</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/09/06/spring&springMvc/springMVC/2014-08-28-what-does-mvc-annotation-driven-do/'>"+" mvc:annotation-driven到底帮我们做了什么</a></li></ul>"
              
                   if($('li#'+"102>ul").length==0){
                    $('li#'+"102").append(chirldHtml);
                   }else{
                    $('li#'+"102>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/09/06/spring&springMvc/springMVC/Exception/'>"+ " Exception Handling in Spring MVC</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/09/06/spring&springMvc/springMVC/Exception/'>"+" Exception Handling in Spring MVC</a></li></ul>"
              
                   if($('li#'+"102>ul").length==0){
                    $('li#'+"102").append(chirldHtml);
                   }else{
                    $('li#'+"102>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/10/17/spring&springMvc/springMVC/ContextLoaderListener And DispatcherServlet Concepts/'>"+ " ContextLoaderListener And DispatcherServlet Concepts</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/10/17/spring&springMvc/springMVC/ContextLoaderListener And DispatcherServlet Concepts/'>"+" ContextLoaderListener And DispatcherServlet Concepts</a></li></ul>"
              
                   if($('li#'+"102>ul").length==0){
                    $('li#'+"102").append(chirldHtml);
                   }else{
                    $('li#'+"102>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/09/06/spring&springMvc/springMVC/SpringMVC异常统一处理的几种方式/'>"+ " Exception Handling in Spring MVC</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/09/06/spring&springMvc/springMVC/SpringMVC异常统一处理的几种方式/'>"+" Exception Handling in Spring MVC</a></li></ul>"
              
                   if($('li#'+"102>ul").length==0){
                    $('li#'+"102").append(chirldHtml);
                   }else{
                    $('li#'+"102>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/01/09/springBoot/springboot学习/Spring Boot 单元测试/'>"+ " Spring Boot 单元测试</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/01/09/springBoot/springboot学习/Spring Boot 单元测试/'>"+" Spring Boot 单元测试</a></li></ul>"
              
                   if($('li#'+"281>ul").length==0){
                    $('li#'+"281").append(chirldHtml);
                   }else{
                    $('li#'+"281>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/12/14/springBoot/springboot学习/Spring Boot 默认日志logback配置解析/'>"+ " springBoot默认日志logback配置解析</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/12/14/springBoot/springboot学习/Spring Boot 默认日志logback配置解析/'>"+" springBoot默认日志logback配置解析</a></li></ul>"
              
                   if($('li#'+"281>ul").length==0){
                    $('li#'+"281").append(chirldHtml);
                   }else{
                    $('li#'+"281>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/11/20/springBoot/springboot学习/Spring Boot的启动器Starter详解/'>"+ " Spring Boot的启动器Starter详解</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/11/20/springBoot/springboot学习/Spring Boot的启动器Starter详解/'>"+" Spring Boot的启动器Starter详解</a></li></ul>"
              
                   if($('li#'+"281>ul").length==0){
                    $('li#'+"281").append(chirldHtml);
                   }else{
                    $('li#'+"281>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/11/20/springBoot/springboot学习/Spring Boot事务/'>"+ " Spring Boot事务</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/11/20/springBoot/springboot学习/Spring Boot事务/'>"+" Spring Boot事务</a></li></ul>"
              
                   if($('li#'+"281>ul").length==0){
                    $('li#'+"281").append(chirldHtml);
                   }else{
                    $('li#'+"281>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/11/20/springBoot/springboot学习/Spring Boot使用redis - 副本/'>"+ " Spring Boot的启动器Starter详解</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/11/20/springBoot/springboot学习/Spring Boot使用redis - 副本/'>"+" Spring Boot的启动器Starter详解</a></li></ul>"
              
                   if($('li#'+"281>ul").length==0){
                    $('li#'+"281").append(chirldHtml);
                   }else{
                    $('li#'+"281>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/03/13/spring源码/spring/2016-08-29-spring-schema (1)/'>"+ " Spring schema 解析</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/03/13/spring源码/spring/2016-08-29-spring-schema (1)/'>"+" Spring schema 解析</a></li></ul>"
              
                   if($('li#'+"101>ul").length==0){
                    $('li#'+"101").append(chirldHtml);
                   }else{
                    $('li#'+"101>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/09/13/spring源码/spring/spring 查看 加载bean/'>"+ " spring 查看 加载bean</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/09/13/spring源码/spring/spring 查看 加载bean/'>"+" spring 查看 加载bean</a></li></ul>"
              
                   if($('li#'+"121>ul").length==0){
                    $('li#'+"121").append(chirldHtml);
                   }else{
                    $('li#'+"121>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/09/13/spring源码/spring/看看Spring的源码 (一)——Bean加载过程/'>"+ " 看看Spring的源码 (一)——Bean加载过程</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/09/13/spring源码/spring/看看Spring的源码 (一)——Bean加载过程/'>"+" 看看Spring的源码 (一)——Bean加载过程</a></li></ul>"
              
                   if($('li#'+"121>ul").length==0){
                    $('li#'+"121").append(chirldHtml);
                   }else{
                    $('li#'+"121>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/09/13/spring源码/spring/看看Spring的源码 (二)-——bean实例化/'>"+ " 看看Spring的源码(二)——bean实例化</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/09/13/spring源码/spring/看看Spring的源码 (二)-——bean实例化/'>"+" 看看Spring的源码(二)——bean实例化</a></li></ul>"
              
                   if($('li#'+"121>ul").length==0){
                    $('li#'+"121").append(chirldHtml);
                   }else{
                    $('li#'+"121>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/10/30/spring源码/springMVC/spring父子容器/'>"+ " Spring-SpringMVC父子容器&AOP使用总结</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/10/30/spring源码/springMVC/spring父子容器/'>"+" Spring-SpringMVC父子容器&AOP使用总结</a></li></ul>"
              
                   if($('li#'+"101>ul").length==0){
                    $('li#'+"101").append(chirldHtml);
                   }else{
                    $('li#'+"101>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/11/30/spring&springMvc/spring/spring aop/spring aop 学习/'>"+ " spring aop学习</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/11/30/spring&springMvc/spring/spring aop/spring aop 学习/'>"+" spring aop学习</a></li></ul>"
              
                   if($('li#'+"101>ul").length==0){
                    $('li#'+"101").append(chirldHtml);
                   }else{
                    $('li#'+"101>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/11/30/spring&springMvc/spring/spring aop/spring aop实现缓存/'>"+ " spring aop实现缓存</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/11/30/spring&springMvc/spring/spring aop/spring aop实现缓存/'>"+" spring aop实现缓存</a></li></ul>"
              
                   if($('li#'+"101>ul").length==0){
                    $('li#'+"101").append(chirldHtml);
                   }else{
                    $('li#'+"101>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/11/20/shiro/新的RBAC：基于资源的权限管理/'>"+ " 新的RBAC：基于资源的权限管理(Resource-Based Access Control)</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/11/20/shiro/新的RBAC：基于资源的权限管理/'>"+" 新的RBAC：基于资源的权限管理(Resource-Based Access Control)</a></li></ul>"
              
                   if($('li#'+"360>ul").length==0){
                    $('li#'+"360").append(chirldHtml);
                   }else{
                    $('li#'+"360>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2018/01/12/设计模式/singleton_pattern/'>"+ " 单例模式使用</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2018/01/12/设计模式/singleton_pattern/'>"+" 单例模式使用</a></li></ul>"
              
                   if($('li#'+"380>ul").length==0){
                    $('li#'+"380").append(chirldHtml);
                   }else{
                    $('li#'+"380>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/12/12/设计模式/design-pattern/'>"+ " 设计模式原则</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/12/12/设计模式/design-pattern/'>"+" 设计模式原则</a></li></ul>"
              
                   if($('li#'+"380>ul").length==0){
                    $('li#'+"380").append(chirldHtml);
                   }else{
                    $('li#'+"380>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2016/12/04/maven/MavenUsageSummary/'>"+ " Maven基础</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2016/12/04/maven/MavenUsageSummary/'>"+" Maven基础</a></li></ul>"
              
                   if($('li#'+"220>ul").length==0){
                    $('li#'+"220").append(chirldHtml);
                   }else{
                    $('li#'+"220>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/03/20/java/多线程/ThreadLocal/'>"+ " ThreadLocal</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/03/20/java/多线程/ThreadLocal/'>"+" ThreadLocal</a></li></ul>"
              
                   if($('li#'+"264>ul").length==0){
                    $('li#'+"264").append(chirldHtml);
                   }else{
                    $('li#'+"264>ul:first").append(html);
                   }

              
            
              var html="<li>" +"<a href='/2017/03/20/java/jvm/ClassLoader/'>"+ " ClassLoader</a></li>";
              var chirldHtml="<ul><li>"+"<a href='/2017/03/20/java/jvm/ClassLoader/'>"+" ClassLoader</a></li></ul>"
              
                   if($('li#'+"263>ul").length==0){
                    $('li#'+"263").append(chirldHtml);
                   }else{
                    $('li#'+"263>ul:first").append(html);
                   }

              
            

            $('#mmenu').mmenu({
             extensions		: [ 'widescreen', 'theme-white', 'effect-menu-slide', 'pagedim-black','pageshadow'],
             			counters		: true,
             			dividers		: {
             				fixed 	: true
             			},
             			navbar 			: {
             				title	: 'blog-catalog'
             			},
             			navbars			: [{
             				position: 'top',
             				content : ['searchfield']
             			}, {
             				position: 'top'
             			}, {
             				position: 'bottom',
             				content : ['<div>Hosted by <a href="http://flycloud.me" target="_blank">FlyCloud</a></div>']
             			}]
            });
          });

          
      $("table").wrap("<div class='table-area'></div>");


       /**$(".donate-btn").hover(function () {
        $('#sidebar').css('display','block');
        $('.header-inner').css('display','inherit');
       $('.sidebar-inner').css('display','inherit');
        });

         $('#hamburger').click(function(){
         $('.sidebar').css('display','none');
          $('#mm-blocker').on("click",function(){
          $('.sidebar').css('display','block');
        })
       });**/
       
       

      });
</script>



  


  




	





  





  





  






  





  

  

  

  

  
 

</body>

 

</html>
